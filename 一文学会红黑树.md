## 一文学会红黑树

红黑树算是一个比较复杂的数据结构，之前还有个梗说面试的时候让手写红黑树，都被大家笑称说太难了。不过如果能完全的理解红黑树，配合上一定的基础，手写出大部分红黑树操作甚至完全手写也不是不可能。

### 二叉树

红黑树是二叉树的一种。二叉树能够加快数据的查找速度，每一次查找都能将范围缩小一半，理论上的时间复杂度是O(log n)的。下面我们简单看下二叉树的基本原则（为了理解简单，本文设计的二叉树和红黑树都是不包含重复数据和null数据的）。

> 给定父节点P，则他的左子节点L的值小于P的值，右子节点R的值大于P的值

可以看到构建一个二叉树的原则非常简单，具体在代码实现中也会非常的简单，这个时候我们来看下插入一系列的数据后，二叉树会是个什么样子。

假定插入的数据列 (1,2,3,4,5)

[图片]

可以看到整个二叉树变成了一条线，看起来像是一个链表。这是正常的，二叉树在很多情况下会变得不平衡，某些分支会长于其他的分支，极端情况下会退化称一个链表，而此时查找的时间复杂度度不再是O(log n)而是变成O(n),会照成效率的严重下降。



正因为上面的问题，所以人们发明了 平衡二叉树

> 平衡二叉树 ： 简单来说就是保持左右子树高度平衡，两子树高度相差不超过1

而红黑树属于平衡二叉树的一种，有着自平衡的能力，查找时间复杂度为O(log n)



### 红黑树的五大原则

- 1.节点是黑色或者红色
- 2.根节点是黑色
- 3.所有叶子节点是黑色（叶子节点是NULL节点）
- 4.父子节点不能都为红色
- 5.从任一节点到其每个叶子节点的所有简单路径包含的黑色节点数目相同

红黑树五大原则或者性质，大家应该都很熟悉。相信大家看完之后总会感觉: 就这？然后呢？就这？ 上次看到这废话的时候还是上次!

五个原则感觉什么都说了，又什么都没说，反正看完还是不知道这红黑树到底是个啥，到底怎么实现。



我们首先要知道一点，就是红黑树的目的是为了保证二叉树的平衡，简单的二叉树构建原则无法保证平衡性，所以添加了这五个原则来保证红黑树的平衡性，而平衡性就是保证子树之间的高度差不超过 1。我就是在注意到这一点之后才豁然开朗，真的理解了红黑树。

而且五大原则里其实包含了一些隐形的信息，需要我们仔细解读思索才能发现。





